<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta property="og:image" content="https://siddroid.com//images/thoughtdev.png" />
  <meta name="theme-color" content="#121212" />
  <meta name="generator" content="Hugo 0.80.0" />

  <title>Better permissions on Android &middot; Siddhesh Patil</title>

  <meta name="description" content="A simple app in Kotlin which requests permissions and presents the user with a rationale for granting a denied permission." />

  
  <meta property="og:locale" content="en-us"/>

  
  <meta property="og:image" content="https://siddroid.com//images/siddhesh_patil_about_dev_banner.jpeg">

  
  <meta property="og:site_name" content="Siddhesh Patil - Android Engineer and Kotlin Advocate"/>
  <meta property="og:title" content="Better permissions on Android"/>
  <meta property="og:description" content="A simple app in Kotlin which requests permissions and presents the user with a rationale for granting a denied permission."/>
  <meta property="og:url" content="https://siddroid.com/post/post-android-rationale-permission-dialogs-2020/"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2020-03-08T20:11:21&#43;0530"/>
  <meta property="article:modified_time" content="2021-05-12T15:14:24"/>
  <meta property="article:author" content="Siddhesh Patil">
  
  
  <meta name="thumbnail" content="https://siddroid.com//images/siddhesh_patil_about_dev_banner.jpeg">
  <meta name="twitter:image" content="https://siddroid.com//images/thoughtdev.png">
  <meta name="twitter:card" content="summary_large_image">
  

  
  <script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "TechArticle",
    "name": "Better permissions on Android",
    "headline": "Better permissions on Android",
    "alternativeHeadline": "Learn Kotlin and Android development with Siddhesh Patil",
    "editor": "Siddhesh Patil",
    "genre": "Android development and Kotlin programming",
    "publisher": {
      "@type": "Organization",
      "name": "Siddroid",
      "url": "https://siddroid.com/",
      "logo": {
        "@type": "ImageObject",
        "url": "https://siddroid.com/images/siddhesh_patil.jpg"
      },
      "sameAs" : [ "https://www.linkedin.com/in/patilsid/",
        "https://www.github.com/patilsiddhesh/",
        "https://facebook.com/siddroid/",
        "https://patilsiddhesh.medium.com/",
        "http://twitter.com/siddroid"]
    },
     
    "datePublished": "2020-03-08T20:11:21",
    
    "dateModified": "2021-05-12T15:14:24",
    "author": {
      "@type" : "Person",
      "name": "Siddhesh Patil",
      "alternateName" : "Sid Patil",
      "@id": "https://siddroid.com/about",
      "image": "https://siddroid.com/images/siddhesh_patil.jpg",
      "alumniOf": [
      {
       "@type": "CollegeOrUniversity",
       "name": "University of Mumbai",
       "sameAs": "https://en.wikipedia.org/wiki/University_of_Mumbai"
      },
      {
        "@type": "CollegeOrUniversity",
        "name": "Atharva College of Engineering",
        "sameAs": "http://www.atharvacoe.ac.in/"
       },
      {
       "@type": "CollegeOrUniversity",
       "name": "Bhavans College",
       "sameAs": "https://en.wikipedia.org/wiki/Bhavan's_College"
      }
    ],
      "nationality": "Indian",
      "gender": "male",
      "sameAs" : [ "https://www.linkedin.com/in/patilsid/",
        "https://facebook.com/siddroid/",
        "https://www.github.com/patilsiddhesh/",
        "https://patilsiddhesh.medium.com/",
        "http://twitter.com/siddroid"],
        "birthPlace": {
          "@type": "Place",
          "address": {
            "@type": "PostalAddress",
            "addressLocality": "Mumbai",
            "addressRegion": "Maharashtra"
          }
        },
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "Mumbai",
        "addressRegion": "Maharashtra"
      },
      "affiliation": [
	    {
		  "@type": "Organization",
		  "name": "Paytm",
		  "sameAs": [
			"https://twitter.com/paytm",
			"https://paytm.com"
		  ]
  	},
    {
		  "@type": "Organization",
		  "name": "Paytm Insider",
		  "sameAs": [
			"https://twitter.com/paytminsider",
			"https://insider.in"
		  ]
  	},
    {
		  "@type": "Organization",
		  "name": "Kotlin Mumbai",
		  "sameAs": [
			"https://twitter.com/kotlinmumbai",
			"https://kotlinmumbai.tech"
		  ]
  	}

],
      "jobTitle": "Android Engineer",
      "worksFor": [
      {
      "@type": "Organization",
      "name": "Paytm",
      "sameAs": [
        "https://twitter.com/Paytm",
        "https://paytm.com"
      ]
      },
          {
      "@type": "Organization",
      "name": "Paytm Insider",
      "sameAs": [
        "https://twitter.com/PaytmInsider",
        "https://insider.in"
      ]
      }
    ],
      "url" : "https://siddroid.com",
      "disambiguatingDescription": "Android Engineer at Paytm Insider and Organizer of Kotlin Mumbai",
      "description": "Android Engineer and Kotlin Advocate from Mumbai. Learn to develop quality Android apps and build software with Kotlin."
    
    },
    
    "image": "https://siddroid.com//images/thoughtdev.png",
    "url": "https://siddroid.com/post/post-android-rationale-permission-dialogs-2020/",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://siddroid.com/"
    },
     
    "keywords": ["Runtime permissions on Android","Permission rationale dialog on Android","Android permission tutorial","User deny permission Android","Android permission using Kotlin"],
    
    "description": "A simple app in Kotlin which requests permissions and presents the user with a rationale for granting a denied permission.",
    "articleBody": "A simple app in Kotlin which requests permissions and presents the user with a rationale for granting a denied permission."
  }
  </script>
  


  <link type="text/css"
        rel="stylesheet"
        href="https://siddroid.com/css/print.css?v=784"
        media="print">

  <link type="text/css"
        rel="stylesheet"
        href="https://siddroid.com/css/poole.css?v=966">

  <link type="text/css"
        rel="stylesheet"
        href="https://siddroid.com/css/hyde.css?v=860">


  
<style type="text/css">
  .sidebar {
    background-color: #3DDC84;
  }

  .read-more-link a {
    border-color: #3DDC84;
  }

  footer a,
  .content a,
  .related-posts li a:hover {
    color: #3DDC84;
  }
</style>



  

  <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700&display=swap">

  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
        integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk="
        crossorigin="anonymous" />



        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://siddroid.com/favicon/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://siddroid.com/favicon/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://siddroid.com/favicon/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://siddroid.com/favicon/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://siddroid.com/favicon/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://siddroid.com/favicon/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://siddroid.com/favicon/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://siddroid.com/favicon/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="https://siddroid.com/favicon/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="https://siddroid.com/favicon/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="https://siddroid.com/favicon/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="https://siddroid.com/favicon/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="https://siddroid.com/favicon/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="Siddroid"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="https://siddroid.com/favicon/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="https://siddroid.com/favicon/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="https://siddroid.com/favicon/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="https://siddroid.com/favicon/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="https://siddroid.com/favicon/mstile-310x310.png" />

  
  </head>
<body class="mainPageBg">
  <div class="topBar">

    

    <div class="topBarLayoutDesk" style="display:flex;justify-content:space-evenly;">

      <div>
        <div style="display:flex;margin-left: 2rem;">
          
            <div class="author-image" style="justify-content: center;margin-right: 10px;">
              <img src="https://siddroid.com/images/siddhesh_patil.jpg" style="flex-shrink: 0;align-self:center;" class="img-circle img-headshot center" width="50px" height="50px"
                title="Siddhesh Patil"
                alt="Siddhesh Patil is an Android Engineer at Paytm Insider. Works on Paytm consumer and business apps. He is the organzier of Kotlin Mumbai, a developer community in Mumbai, India. Find talks, articles and latest developments in Android and Kotlin on this website siddroid.com">
            </div>
          
              
          <a href="/" style="color: #fff;text-decoration:none;">
            <h1 class="siteHeaderText">
              <span id="siteTitleText">Siddroid</span>   
            </h1> 
              
          </a>
        </div>

      </div>

      

      

    
        
    
        <div style="display:flex;justify-content: center;margin-right: 2rem;">
        
        <a href="https://siddroid.com/" title="Go to Homepage" style="color: #e2e2e2;font-family:sansfont;text-decoration: none;-webkit-tap-highlight-color: transparent;
            ">
    
        <div style="width: 50px;">
            <div style="display: flex;align-items: center;justify-content: center;">
                <i class="far fa-bookmark" aria-hidden="true" style="height: 21px;width: 21px;"></i>
              </div>
              <div style="display: flex;align-items: center;justify-content: center;">
                <p style="font-size:80%; color: #e2e2e2; font-family:sansfont;">Home</p>
            </div>
        </div>
          
        </a>
    
        
        <a href="/browse/" title="Navigate this site" style="color: #e2e2e2;font-family:sansfont;text-decoration: none;-webkit-tap-highlight-color: transparent;
          ">
          <div style="width: 50px;margin-left: 3rem;">
            <div style="display: flex;align-items: center;justify-content: center;">
                <i class="far fa-compass" aria-hidden="true" style="height: 21px;width: 21px;"></i>
            </div>
              <div style="display: flex;align-items: center;justify-content: center;">
                <p style="font-size:80%; color: #e2e2e2; font-family:sansfont;;">Browse</p>
            </div>
        </div>
    
        </a>
        
        
        
        
        
    
        
        
        
        <a href="/projects/" title="New and old projects" style="color: #e2e2e2;font-family:sansfont;text-decoration: none;-webkit-tap-highlight-color: transparent;
          ">
    
    <div style="width: 50px;margin-left: 3rem;">
        <div style="display: flex;align-items: center;justify-content: center;">
            <i class="fa fa-code-branch" aria-hidden="true" style="height: 21px;width: 21px;"></i>
        </div>
          <div style="display: flex;align-items: center;justify-content: center;">
            <p style="font-size:80%; color: #e2e2e2; font-family:sansfont;">Projects</p>
        </div>
    </div>
        </a>
        
        
        <a href="/about/" title="Some stuff about Siddhesh" style="color: #e2e2e2;font-family:sansfont;text-decoration: none;-webkit-tap-highlight-color: transparent;
          ">
        <div style="width: 50px;margin-left: 3rem;">
            <div style="display: flex;align-items: center;justify-content: center;">
                <i class="far fa-user-circle" aria-hidden="true" style="height: 21px;width: 21px;"></i>
            </div>
              <div style="display: flex;align-items: center;justify-content: center;">
                <p class="lead" style="font-size:80%; color: #e2e2e2; font-family:sansfont;">About</p>
            </div>
        </div>
        </a>
        
      </div>

      

    </div>


      


    <div class="topBarLayoutMobile">

    <div style="display:flex;justify-content: center;">
      
        <div class="author-image" style="justify-content: center;margin-right: 10px;">
          <img src="https://siddroid.com/images/siddhesh_patil.jpg" class="img-circle img-headshot center" width="50px" height="50px"
            title="Siddhesh Patil"
            alt="Siddhesh Patil is an Android Engineer at Paytm Insider. Works on Paytm consumer and business apps. He is the organzier of Kotlin Mumbai, a developer community in Mumbai, India. Find talks, articles and latest developments in Android and Kotlin on this website siddroid.com">
        </div>
      
          
      <h1 class="siteHeaderText">
      <a href="/" style="color: #e2e2e2;text-decoration:none;">
          <span id="siteTitleText">Siddroid</span>
                  
      </a>
      </h1>
      </div>

  
      <div style="display:flex;justify-content: center;margin-bottom: 1rem;">
      
      <a href="https://siddroid.com/" title="Go to Homepage" style="color: #e2e2e2;font-family:sansfont;text-decoration: none;-webkit-tap-highlight-color: transparent;
          ">
  
      <div style="width: 50px;">
          <div style="display: flex;align-items: center;justify-content: center;">
              <i class="far fa-bookmark" aria-hidden="true" style="height: 21px;width: 21px;"></i>
            </div>
            <div style="display: flex;align-items: center;justify-content: center;">
              <p style="font-size:80%; color: #e2e2e2; font-family:sansfont;">Home</p>
          </div>
      </div>
        
      </a>
  
      
      <a href="/browse/" title="Navigate this site" style="color: #e2e2e2;font-family:sansfont;text-decoration: none;-webkit-tap-highlight-color: transparent;
        ">
        <div style="width: 50px;margin-left: 2rem;">
          <div style="display: flex;align-items: center;justify-content: center;">
              <i class="far fa-compass" aria-hidden="true" style="height: 21px;width: 21px;"></i>
          </div>
            <div style="display: flex;align-items: center;justify-content: center;">
              <p style="font-size:80%; color: #e2e2e2; font-family:sansfont;;">Browse</p>
          </div>
      </div>
  
      </a>
      
      
      
      
      
  
      
      
      
      <a href="/projects/" title="New and old projects" style="color: #e2e2e2;font-family:sansfont;text-decoration: none;-webkit-tap-highlight-color: transparent;
        ">
  
  <div style="width: 50px;margin-left: 2rem;">
      <div style="display: flex;align-items: center;justify-content: center;">
          <i class="fa fa-code-branch" aria-hidden="true" style="height: 21px;width: 21px;"></i>
      </div>
        <div style="display: flex;align-items: center;justify-content: center;">
          <p style="font-size:80%; color: #e2e2e2; font-family:sansfont;">Projects</p>
      </div>
  </div>
      </a>
      
      
      <a href="/about/" title="Some stuff about Siddhesh" style="color: #e2e2e2;font-family:sansfont;text-decoration: none;-webkit-tap-highlight-color: transparent;
        ">
      <div style="width: 50px;margin-left: 2rem;">
          <div style="display: flex;align-items: center;justify-content: center;">
              <i class="far fa-user-circle" aria-hidden="true" style="height: 21px;width: 21px;"></i>
          </div>
            <div style="display: flex;align-items: center;justify-content: center;">
              <p class="lead" style="font-size:80%; color: #e2e2e2; font-family:sansfont;">About</p>
          </div>
      </div>
      </a>
      

      
    </div>
    
  
  </div>

</div>


  <main id="main-container" class="parentContainer">
      <div class="post">

  <div style="display: flex;justify-content: center;align-items: center;">
    <h1 style="text-align: center;">
      Better permissions on Android
    </h1>
  </div>

  <div style="display: flex;justify-content: center;align-items: center;">
    <div class="post-date">
      <p style="color: #a5a5a5;"><time datetime=" 2020-03-08T20:11:21&#43;0530">Mar 8, 2020</time> · 4 min read
      </p>
    </div>
  </div>

  <div style="display: flex;justify-content: center;align-items: center;">
    
    <p
      style="border-radius: 0.5em; width:fit-content;padding-right: 15px;padding-top: 5px;padding-bottom: 5px;font-size: 90%;">
      Updated for Android 12, for SDK 31
    </p>
  </div>



  


  <div style="display: flex;align-items: center;justify-content: center;">
    <img src="/images/thoughtdev.png" alt="Permission rationale dialogs on Android">
</div>


<p>Permissions request dialogs are a vital part of user’s experience on the app. When a user installs an application for the first time they may or may not be clear of what the app does and why the app requires a certain set of permissions for its functionality.</p>
<p>Many applications show a permission request dialog and a user can choose to grant or deny a permission. Often a user may deny a certain permission which may be required for the core functionality of the app.</p>
<p><strong>Well, why are permission rationale dialog important?</strong></p>
<blockquote>
<p>They offer the user a clear explanation on why the permission is required which may have been unclear previously when the user had denied the permission.</p>
</blockquote>
<p>In this article we’ll cover how to handle cases where a user has previously denied a permission and present them with a rationale or a reason on why the user should grant the permission by using best practices and taking advantage of shouldShowRequestPermissionRationale.
Let’s get started!</p>
<p>In this example we’ll be making a simple app in Kotlin which requests permissions and presents the user with a rationale for granting a denied permission. We’ll take a case where the app requires READ_CONTACTS permission from the user.</p>
<p><strong>Step 1:</strong> Define the permission in the Manifest</p>
<p><div style="display: flex;margin-left:0.5rem">   
    <i class="fas fa-terminal" style="color: #a5a5a5;margin-top:3px"></i>
    <p style="color: #a5a5a5;margin-left:0.5rem">AndroidManifest.xml</p>  
</div>
<div class="highlight"><pre class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&#34;android.permission.READ_CONTACTS&#34;</span><span class="nt">/&gt;</span></code></pre></div></p>
<p><strong>Step 2:</strong> Define a function that checks for the permission</p>
<div class="kotlin-playground" theme="darcula" data-highlight-only>
private fun checkContactsPermission() {
    if (ContextCompat.checkSelfPermission(this, android.Manifest.permission.READ_CONTACTS) !=
        PackageManager.PERMISSION_GRANTED
    ) {
        // Check if permission is not granted
        Log.d(TAG, "Permission for contacts is not granted")
        // This condition only becomes true if the user has denied the permission previously
        if (shouldShowRequestPermissionRationale(android.Manifest.permission.READ_CONTACTS)) {
            showRationaleDialog(getString(R.string.rationale_title),
                getString(R.string.rationale_desc),
                android.Manifest.permission.READ_CONTACTS,
                REQUEST_CONTACTS_STATE)
        } else {
            // Perform a permission check
            Log.d(TAG, "Checking permission")
            requestPermissions(arrayOf(android.Manifest.permission.READ_CONTACTS),REQUEST_CONTACTS_STATE)
        }
    } else {
        // Permission is already granted, do your magic here!
    }
}
</div>
<p><strong>Here the code will perform a check if the read contacts permission is granted or not.
The following cases will occur:</strong></p>
<ol>
<li>First time user who is opening the app will be presented with a standard request permission dialog.</li>
<li>A user who has denied the permission previously will be presented with a rationale dialog.</li>
<li>User has granted the permission.</li>
</ol>
<p><strong>Step 3:</strong> Define your function for showing a rationale dialog</p>
<p>We can acheive this with an AlertDialog as shown in the below function</p>
<div class="highlight"><pre class="chroma"><code class="language-kotlin" data-lang="kotlin"><span class="k">private</span> <span class="k">fun</span> <span class="nf">showRationaleDialog</span><span class="p">(</span><span class="n">title</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span> <span class="n">permission</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span> <span class="n">requestCode</span><span class="p">:</span> <span class="n">Int</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">val</span> <span class="py">builder</span><span class="p">:</span> <span class="n">AlertDialog</span><span class="p">.</span><span class="n">Builder</span> <span class="p">=</span> <span class="n">AlertDialog</span><span class="p">.</span><span class="n">Builder</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
    <span class="n">builder</span><span class="p">.</span><span class="n">setTitle</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
        <span class="p">.</span><span class="n">setMessage</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="p">.</span><span class="n">setPositiveButton</span><span class="p">(</span><span class="s2">&#34;Ok&#34;</span><span class="p">,</span> <span class="p">{</span> <span class="n">dialog</span><span class="p">,</span> <span class="n">which</span> <span class="o">-&gt;</span>
            <span class="n">requestPermissions</span><span class="p">(</span><span class="n">arrayOf</span><span class="p">(</span><span class="n">permission</span><span class="p">),</span> <span class="n">requestCode</span><span class="p">)</span>
        <span class="p">})</span>
    <span class="n">builder</span><span class="p">.</span><span class="n">create</span><span class="p">().</span><span class="n">show</span><span class="p">()</span>
<span class="p">}</span></code></pre></div>
<p>We’ll also add strings for the dialog. In this example our sample app needs read contacts permission for suggesting connections or people the user may know.</p>
<p><div style="display: flex;margin-left:0.5rem">   
    <i class="fas fa-terminal" style="color: #a5a5a5;margin-top:3px"></i>
    <p style="color: #a5a5a5;margin-left:0.5rem">strings.xml</p>  
</div>
<div class="highlight"><pre class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">&#34;rationale_title&#34;</span><span class="nt">&gt;</span>We need permission to read your contacts<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">&#34;rationale_desc&#34;</span><span class="nt">&gt;</span>This app relies on read access to your contacts. We require access to this permission to find your contacts in our database and suggest people you may know. We will not store any contact info in our data base if they are not a part of our platform. For further info read our privacy policy.<span class="nt">&lt;/string&gt;</span></code></pre></div></p>
<p><strong>Step 4:</strong> Let’s handle the permission results</p>
<p>We’ll display a Toast message once permission has been granted or denied by overriding onPermissionResults()</p>
<div style="font-family="jetbrains">
<div class="highlight"><pre class="chroma"><code class="language-kotlin" data-lang="kotlin"><span class="k">override</span> <span class="k">fun</span> <span class="nf">onRequestPermissionsResult</span><span class="p">(</span><span class="n">requestCode</span><span class="p">:</span> <span class="n">Int</span><span class="p">,</span>
                                        <span class="n">permissions</span><span class="p">:</span> <span class="n">Array</span><span class="p">&lt;</span><span class="k">out</span> <span class="n">String</span><span class="p">&gt;,</span>
                                        <span class="n">grantResults</span><span class="p">:</span><span class="n">IntArray</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">when</span> <span class="p">(</span><span class="n">requestCode</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">REQUEST_CONTACTS_STATE</span> <span class="o">-&gt;</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">grantResults</span><span class="p">.</span><span class="n">isNotEmpty</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">grantResults</span><span class="p">[</span><span class="m">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">PackageManager</span><span class="p">.</span><span class="n">PERMISSION_GRANTED</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">Toast</span><span class="p">.</span><span class="n">makeText</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&#34;Permission granted&#34;</span><span class="p">,</span> <span class="n">Toast</span><span class="p">.</span><span class="n">LENGTH_SHORT</span><span class="p">).</span><span class="n">show</span><span class="p">()</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="n">Toast</span><span class="p">.</span><span class="n">makeText</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&#34;Permission denied&#34;</span><span class="p">,</span> <span class="n">Toast</span><span class="p">.</span><span class="n">LENGTH_SHORT</span><span class="p">).</span><span class="n">show</span><span class="p">()</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>
</div>
<p>All Done! Let’s see how this works</p>
<table>
<thead>
<tr>
<th style="text-align:center">User denies the permission</th>
<th style="text-align:center">Rational dialog on next open</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="/images/dialogone.png" alt=""></td>
<td style="text-align:center"><img src="/images/dialogtwo.png" alt=""></td>
</tr>
</tbody>
</table>
<p>The user now sees a rationale dialog since the permission was previously denied and shouldShowRequestPermissionRationale for the given permission has now become true.</p>
<p>Once the user taps on the positive button, the app will request permissions again. Hopefully this time you have convinced your user on why the permission is required.</p>
<p>Here is a Github link for the above project as a sample for your reference.</p>
<div class="githubProject" style="display: flex;">
    <i class="fab fa-github" style="color: #bd93f9;margin-top:3px"></i>
    <a href="https://github.com/PatilSiddhesh/android-permission-rationale" style="color: #bd93f9;margin-left: 10px;text-decoration:none;" target="_blank">PatilSiddhesh/android-permission-rationale</a>
</div>


<p>Cheers! We have successfully implemented rationale dialogs for permissions by following best practices.</p>

</div>

 

<script src="https://unpkg.com/kotlin-playground"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
  KotlinPlayground('.kotlin-playground');

});
</script>






<div class="authorCard" style="margin-bottom: 1em;">
  <p style="font-weight: bold;">
    <i class="fas fa-bookmark" style="margin-right: 0.5em;color: #FFD54F;"></i>
    About the author
  </p>

  <p style="font-size: 80%;">Siddhesh is an Android Engineer and Kotlin Advocate from Mumbai.
      He currently makes apps for Paytm and Insider.in, working on Paytm's chat, payments, merchant and entertainment
      ticketing businesses.
      Over the years he has published several apps for Android that have helped clients reach their targets.
      Companies like Axis Bank, Yes Bank, ICICI have benifited from apps he has developed.

      <br>
    </p>

    <p style="font-size: 80%;"> He also organizes an open-community for developers called Kotlin Mumbai, often
      participating as a speaker and helping everyone learn Android and Kotlin.

      <br>
    </p>

    <a href="https://twitter.com/Siddroid?ref_src=twsrc%5Etfw" class="twitter-follow-button" data-show-count="false">Follow @Siddroid</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

    
    
  

  </div>


</div>

<div>
  <p style="font-size: 90%;margin-top: 10px;font-style: italic;">
    This publication was last updated on May 12, 2021
  </p>

</div>







<style>
#share-buttons {display: inline-block; vertical-align: middle; }
#share-buttons:after {content: ""; display: block; clear: both;}
#share-buttons > div {
position: relative;
text-align: left; 
height: 36px; 
width: 32px; 
float: left; 
text-align: center;
}
#share-buttons > div > svg {height: 16px; fill: #acacac; margin-top: 10px;}
#share-buttons > div:hover {cursor: pointer;}
#share-buttons > div.facebook:hover > svg {fill: #3B5998;}
#share-buttons > div.twitter:hover > svg {fill: #55ACEE;}
#share-buttons > div.mail:hover > svg {fill: rgb(238, 36, 36);}
#share-buttons > div.instagram:hover > svg {fill: #C73B92;}
#share-buttons > div.facebook > svg {height: 18px; margin-top: 9px;}
#share-buttons > div.twitter > svg {height: 20px; margin-top: 8px;}
#share-buttons > div.mail > svg {height: 14px; margin-top: 11px;}
</style>

<span style="color: #acacac;font-family: sansfont;">Share on </span><div id="share-buttons">
<div class="facebook" title="Share this on Facebook" onclick="window.open('http://www.facebook.com/share.php?u=https:\/\/siddroid.com\/post\/post-android-rationale-permission-dialogs-2020\/');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759h-306v-759h-255v-296h255v-218q0-186 104-288.5t277-102.5q147 0 228 12z"/></svg></div>
<div class="twitter" title="Share this on Twitter" onclick="window.open('https://twitter.com/intent/tweet?&url=https:\/\/siddroid.com\/post\/post-android-rationale-permission-dialogs-2020\/');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5t-115.5 248.5-184.5 210.5-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5t-114-159.5q33 5 61 5 43 0 85-11-112-23-185.5-111.5t-73.5-205.5v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5t371.5 99.5q-8-38-8-74 0-134 94.5-228.5t228.5-94.5q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"/></svg></div>
<div class="mail" title="Share this through Email" onclick="window.open('mailto:?&body=https:\/\/siddroid.com\/post\/post-android-rationale-permission-dialogs-2020\/');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1792 710v794q0 66-47 113t-113 47h-1472q-66 0-113-47t-47-113v-794q44 49 101 87 362 246 497 345 57 42 92.5 65.5t94.5 48 110 24.5h2q51 0 110-24.5t94.5-48 92.5-65.5q170-123 498-345 57-39 100-87zm0-294q0 79-49 151t-122 123q-376 261-468 325-10 7-42.5 30.5t-54 38-52 32.5-57.5 27-50 9h-2q-23 0-50-9t-57.5-27-52-32.5-54-38-42.5-30.5q-91-64-262-182.5t-205-142.5q-62-42-117-115.5t-55-136.5q0-78 41.5-130t118.5-52h1472q65 0 112.5 47t47.5 113z"/></svg></div>
</div>





<hr>










<div id="disqus_thread"></div>





  <script>
    (function () {
      var d = document, s = d.createElement('script');
      s.src = 'https://truestark.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
      


      s.onload = () => {
      setTimeout(function() {
        d.getElementById("disqus_thread").getElementsByTagName("iframe")[0].setAttribute("style", "width: 1px !important; min-width: 100% !important; border: none !important; overflow: hidden !important; height: 641px !important;background-color:#1d1d1d");

      }, 100)  
      
    }


    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by
      Disqus.</a></noscript>


  </main>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/js/all.min.js"
          integrity="sha256-MAgcygDRahs+F/Nk5Vz387whB4kSK9NXlDN3w58LLq0="
          crossorigin="anonymous"></script>

  

  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-172413499-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  <script src="https://siddroid.com/js/custom.js"></script> </script>
</body>

<footer style="margin-bottom: ;">

  <div class="bottomBar">

  
    <section class="social-icons">
      <div style="display: flex;justify-content: center;margin-bottom: 1rem;">
          
          <a href="http://twitter.com/intent/user?screen_name=siddroid" rel="me" title="Twitter" target="_blank" style="color: #c7c7c7;margin-left: 1rem;margin-right: 1rem;">
            
            <div style="display: flex;align-items: center;justify-content: center;color: #fff;">
              <i class="fab fa-twitter" aria-hidden="true" style="height: 23px;width: 23px;"></i>
          </div>
          </a>
          
          <a href="https://www.linkedin.com/in/patilsid/" rel="me" title="Linkedin" target="_blank" style="color: #c7c7c7;margin-left: 1rem;margin-right: 1rem;">
            
            <div style="display: flex;align-items: center;justify-content: center;color: #fff;">
              <i class="fab fa-linkedin" aria-hidden="true" style="height: 23px;width: 23px;"></i>
          </div>
          </a>
          
          <a href="https://github.com/patilsiddhesh" rel="me" title="GitHub" target="_blank" style="color: #c7c7c7;margin-left: 1rem;margin-right: 1rem;">
            
            <div style="display: flex;align-items: center;justify-content: center;color: #fff;">
              <i class="fab fa-github" aria-hidden="true" style="height: 23px;width: 23px;"></i>
          </div>
          </a>
          
          <a href="https://www.reddit.com/user/siddheshpatil/" rel="me" title="Reddit" target="_blank" style="color: #c7c7c7;margin-left: 1rem;margin-right: 1rem;">
            
            <div style="display: flex;align-items: center;justify-content: center;color: #fff;">
              <i class="fab fa-reddit" aria-hidden="true" style="height: 23px;width: 23px;"></i>
          </div>
          </a>
          
      </div>
    </section>

    <section>
      <div style="display: flex;justify-content: center;">
          <a href="/browse/android/" rel="me" title="Android" style="color: #3ddc84;margin-left: 0.5rem;margin-right: 0.5rem;">
            
            <div style="display: flex;align-items: center;justify-content: center;">
                <p style="font-size:80%; color: #3ddc84; font-family:sansfont;">Android</p>                      
            </div>
          </a>
          <a href="/browse/community/" rel="me" title="Android" style="color: #3ddc84;margin-left: 0.5rem;margin-right: 0.5rem;">
            
            <div style="display: flex;align-items: center;justify-content: center;">
                <p style="font-size:80%; color: #3ddc84; font-family:sansfont;">Community</p>                      
            </div>
          </a>
          <a href="/browse/updates/" rel="me" title="Android" style="color: #3ddc84;margin-left: 0.5rem;margin-right: 0.5rem;">
            
            <div style="display: flex;align-items: center;justify-content: center;">
                <p style="font-size:80%; color: #3ddc84; font-family:sansfont;">Updates</p>                      
            </div>
          </a>
          <a href="/browse/projects/" rel="me" title="Android" style="color: #3ddc84;margin-left: 0.5rem;margin-right: 0.5rem;">
            
            <div style="display: flex;align-items: center;justify-content: center;">
                <p style="font-size:80%; color: #3ddc84; font-family:sansfont;">Projects</p>                      
            </div>
          </a>
          <a href="/browse/talks/" rel="me" title="Android" style="color: #3ddc84;margin-left: 0.5rem;margin-right: 0.5rem;">
            
            <div style="display: flex;align-items: center;justify-content: center;">
                <p style="font-size:80%; color: #3ddc84; font-family:sansfont;">Talks</p>                      
            </div>
          </a>
      </div>
    </section>

  

  <p style="font-size: 70%;margin-top: 0.5rem;margin-bottom:1rem;margin-left:5rem;margin-right:5rem;text-align: center;">Siddroid.com is a website by Siddhesh Patil, an Android Engineer and Kotlin Advocate from Mumbai. Read latest articles on Android, Kotlin and open-source projects. Find tech talks, news from communities, developer events, and workshops by Android app developers around the world.
  </p>

  <div class="copyright">
    &copy; Siddhesh Patil 2021 · <a href="/policy/">Content & Privacy Policy</a>
  </div>

  </div>      

  
  

</footer>


<div style="height: 10rem;"></div>

</html>
